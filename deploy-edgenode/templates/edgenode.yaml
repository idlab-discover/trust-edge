apiVersion: {{ .Values.api.group }}/{{ .Values.api.version }}
kind: EdgeNode
metadata:
  name: {{ .Values.nodeUUID }}-edgenode
  namespace: {{ .Values.keylimeNamespace }}
spec:
  #ekcert is extracted from the tpm with `sudo tpm2_nvread 0x1c00002 -o file`, file is then b64 encoded
  ekcert: "MIIEBzCCAu+gAwIBAgIUUUg56QkNvTy3kNH+rSOsfiW/0wEwDQYJKoZIhvcNAQELBQAwVTELMAkGA1UEBhMCQ0gxHjAcBgNVBAoTFVNUTWljcm9lbGVjdHJvbmljcyBOVjEmMCQGA1UEAxMdU1RNIFRQTSBFSyBJbnRlcm1lZGlhdGUgQ0EgMDYwIBcNMjIxMDIyMjI0NzQ3WhgPOTk5OTEyMzEyMzU5NTlaMAAwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDEuZUowBhNct7ILJohgBtFx8L/Ut3+1FsxTgi0hY0B8gmPb7ENqhKGIDTSQ1lLXEMx+2xzX23IKI3aGocCwBPfaKMdvkZZW6pwWipKQMoftlnBWPDb5y3oMJE3Oud0z5UYclYngoC0zw3+mpZXAA4oiwcw3czswzXvRAgjhNdQbuFpKnvEriBuEl1Hv3J7N0k+tuf0qftXg0aqgoNSg7wP8koS68yF8dbEc6oWtaZ7tKvDqa3RjaEODlEF7GDrcumRnpwcEcnafn43G6gcIT4DqFjdlwKfbvP3YOh7ZGwmemD8Cb0QrxF5162xkAU2i6r4JuSyCZsmdjLiAz2rmQWdAgMBAAGjggEgMIIBHDAfBgNVHSMEGDAWgBT7F9cNc0hw6RnE6OYDl15mTg5D3jBZBgNVHREBAf8ETzBNpEswSTEWMBQGBWeBBQIBDAtpZDo1MzU0NEQyMDEXMBUGBWeBBQICDAxTVDMzSFRQSEFIRTQxFjAUBgVngQUCAwwLaWQ6MDAwMTAzMDEwIgYDVR0JBBswGTAXBgVngQUCEDEOMAwMAzIuMAIBAAICAJ8wDAYDVR0TAQH/BAIwADAQBgNVHSUECTAHBgVngQUIATAOBgNVHQ8BAf8EBAMCBSAwSgYIKwYBBQUHAQEEPjA8MDoGCCsGAQUFBzAChi5odHRwOi8vc2VjdXJlLmdsb2JhbHNpZ24uY29tL3N0bXRwbWVraW50MDYuY3J0MA0GCSqGSIb3DQEBCwUAA4IBAQBkoaVIZ8ldGLCR/AFMdGYHWcsA94FwZHx+d6fJRFt/hlS8EVOxpye6c0PnGTWGWktMnD19Yfr8hOEzqRRtP7dAgzsopq0+p3rGyZdYbPtn6gA3jGXLnv002kRR01cHDGlKQP4LgLe1WgfyD61zdSzsk0QuCKvkpPgsyYIph7dmbPYmdDqy1dxXjGOWbvaNt34qPaI3CfbpK1IavZfrjKiAddQfg2ziQJn4mmkG+cBdhGjpGhJFSkFarWshq8P0gPGo88XNcvmfEvhl4mj2Uv3dxWj602VSy5xZMMtXrIVSDppPCco4gYHli1Mjwsu2WQ1GmqrPoeqimrlVPjfQCJg0"
  nodeStatus: "unregistered"
  uuid: {{ .Values.nodeUUID }}
  mbrefstate: {{ .Files.Get "config.json" | toPrettyJson }}
